gather(key = "movement_type", value = "count",
sum_immigrants:sum_emmigrants) %>%
ggplot(aes(year, movement_type)) +
geom_line() +
blorg::blog_theme
migration_year_summary %>% ungroup() %>%
select(year, sum_immigrants, sum_emmigrants) %>%
gather(key = "movement_type", value = "count",
sum_immigrants:sum_emmigrants) %>%
ggplot(aes(year, count, colour = movement_type)) +
geom_line() +
blorg::blog_theme
migration_year_summary %>% ungroup() %>%
select(year, sum_immigrants, sum_emmigrants) %>%
gather(key = "movement_type", value = "count",
sum_immigrants:sum_emmigrants) %>%
ggplot(aes(year, count, colour = movement_type, group = movement_type)) +
geom_line() +
blorg::blog_theme
migration_year_summary %>% ungroup() %>%
select(year, sum_immigrants, sum_emmigrants) %>%
gather(key = "movement_type", value = "count",
sum_immigrants:sum_emmigrants) %>%
ggplot(aes(year, count, colour = movement_type, group = movement_type)) +
geom_smooth() +
blorg::blog_theme
migration_year_summary %>% ungroup() %>%
select(year, sum_immigrants, sum_emmigrants) %>%
gather(key = "movement_type", value = "count",
sum_immigrants:sum_emmigrants) %>%
ggplot(aes(year, count, colour = movement_type, group = movement_type)) +
geom_line() +
blorg::blog_theme +
scale_colour_manual(values = blorg::blog_palette)
migration_year_summary %>% ungroup() %>%
select(year, sum_immigrants, sum_emmigrants) %>%
gather(key = "movement_type", value = "count",
sum_immigrants:sum_emmigrants) %>%
ggplot(aes(year, count, colour = movement_type, group = movement_type)) +
geom_line(size = 1.5) +
blorg::blog_theme +
scale_colour_manual(values = blorg::blog_palette)
migration_clean %>% ungroup() %>%
select(country, year, immigrants) %>%
ggplot(aes(year, immigrants, colour = country, group = country)) +
geom_line(size = 1.5) +
blorg::blog_theme +
scale_colour_manual(values = blorg::blog_palette)
migration_clean %>% ungroup() %>%
select(country, year, immigrants) %>%
ggplot(aes(year, immigrants, colour = country, group = country)) +
geom_line(size = 1.5) +
blorg::blog_theme
emmigration_raw <- readr::read_tsv("./data/tps00177_emmigration.tsv")
glimpse(migration_clean)
migration_clean$country %>% unique()
migration_clean$year %>% unique()
migration_clean %>% ungroup() %>%
select(country, year, immigrants) %>%
ggplot(aes(year, immigrants, colour = country, group = country)) +
geom_line(size = 1.5) +
blorg::blog_theme
migration_clean %>% ungroup() %>%
select(country, year, immigrants) %>%
ggplot(aes(year, immigrants, colour = country, group = country)) +
geom_line(size = 1.5) +
blorg::blog_theme
library(tidyverse)
library(stringr)
migration_clean %>% ungroup() %>%
select(country, year, immigrants) %>%
ggplot(aes(year, immigrants, colour = country, group = country)) +
geom_line(size = 1.5) +
blorg::blog_theme
View(migration_clean)
View(migration_country_summary)
most_net_migrants <-
migration_clean %>%
arrange(net_migration) %>%
top_n(5)
migration_clean %>%
arrange(net_migration) %>%
select(country, net_migration)
top_n(5)
migration_clean %>%
arrange(net_migration) %>%
select(country, net_migration) %>%
top_n(5)
View(migration_clean)
migration_country_summary %>% ungroup() %>%
arrange(net_migration) %>%
select(country, net_migration) %>%
top_n(5)
migration_country_summary %>% ungroup() %>%
arrange(net_migration)
migration_country_summary %>% ungroup()
migration_country_summary %>% ungroup() %>%
arrange(total_net_migration) %>%
select(country, total_net_migration) %>%
top_n(5)
most_net_migrants <-
migration_country_summary %>% ungroup() %>%
arrange(total_net_migration) %>%
select(country, total_net_migration) %>%
top_n(5)
migration_country_summary$countries_most_net_migrants <-
if_else(migration_country_summary$country %in% most_net_migrants,
migration_country_summary$country, "Other")
migration_country_summary$countries_most_net_migrants
most_net_migrants
migration_country_summary$countries_most_net_migrants <-
if_else(migration_country_summary$country %in% most_net_migrants$country,
migration_country_summary$country, "Other")
migration_country_summary$countries_most_net_migrants <- NULL
if_else(migration_clean$country %in% most_net_migrants$country,
migration_clean$country, "Other")
migration_clean$countries_most_net_migrants <-
if_else(migration_clean$country %in% most_net_migrants$country,
migration_clean$country, "Other")
migration_clean %>%
select(country, year, immigrants) %>%
ggplot(aes(year, immigrants, colour = country, group = country)) +
geom_line(size = 1.5) +
blorg::blog_theme +
scale_colour_manual(values = blorg::blog_palette)
migration_clean %>%
select(country, year, immigrants) %>%
ggplot(aes(year, immigrants, colour = countries_most_net_migrants,
group = countries_most_net_migrants)) +
geom_line(size = 1.5) +
blorg::blog_theme +
scale_colour_manual(values = blorg::blog_palette)
migration_clean %>%
select(country, year, immigrants) %>%
ggplot(aes(year, immigrants, colour = countries_most_net_migrants,
group = countries_most_net_migrants))
migration_clean %>%
select(countries_most_net_migrants, year, immigrants) %>%
ggplot(aes(year, immigrants, colour = countries_most_net_migrants,
group = countries_most_net_migrants)) +
geom_line(size = 1.5) +
blorg::blog_theme +
scale_colour_manual(values = blorg::blog_palette)
migration_clean %>%
ggplot(aes(year, net_migration, colour = countries_most_net_migrants,
group = countries_most_net_migrants)) +
geom_line(size = 1.5) +
blorg::blog_theme +
scale_colour_manual(values = blorg::blog_palette)
migration_clean %>% ungroup() %>%
ggplot(aes(year, net_migration, colour = countries_most_net_migrants,
group = countries_most_net_migrants)) +
geom_line(size = 1.5) +
blorg::blog_theme +
scale_colour_manual(values = blorg::blog_palette)
migration_clean %>% ungroup() %>%
ggplot(aes(year, net_migration, colour = countries_most_net_migrants,
group = countries_most_net_migrants)) +
geom_path(size = 1.5) +
blorg::blog_theme +
scale_colour_manual(values = blorg::blog_palette)
migration_clean %>% ungroup() %>%
ggplot(aes(year, net_migration, colour = countries_most_net_migrants,
group = countries_most_net_migrants)) +
geom_path(size = 1.5) +
geom_point() +
blorg::blog_theme +
scale_colour_manual(values = blorg::blog_palette)
migration_clean %>% ungroup() %>%
ggplot(aes(year, net_migration, colour = countries_most_net_migrants,
group = countries_most_net_migrants)) +
#geom_path(size = 1.5) +
geom_point() +
blorg::blog_theme +
scale_colour_manual(values = blorg::blog_palette)
migration_clean %>%
select(countries_most_net_migrants, year, net_migration)
group_by(countries_most_net_migrants, year) %>%
summarise(total_net_migration = sum(net_migration))
migration_clean %>%
select(countries_most_net_migrants, year, net_migration)
group_by(year) %>%
summarise(total_net_migration = sum(net_migration))
migration_clean %>%
select(countries_most_net_migrants, year, net_migration) %>%
group_by(year) %>%
summarise(total_net_migration = sum(net_migration))
migration_clean %>%
select(countries_most_net_migrants, year, net_migration) %>%
group_by(countries_most_net_migrants, year) %>%
summarise(total_net_migration = sum(net_migration))
migration_clean %>%
select(countries_most_net_migrants, year, net_migration) %>%
group_by(countries_most_net_migrants, year) %>%
summarise(total_net_migration = sum(net_migration)) %>% View()
migration_clean %>%
select(countries_most_net_migrants, year, net_migration) %>%
group_by(countries_most_net_migrants, year) %>%
summarise(total_net_migration = sum(net_migration)) %>%
ggplot(aes(year, total_net_migration,
colour = countries_most_net_migrants,
group = countries_most_net_migrants)) +
#geom_path(size = 1.5) +
geom_point() +
blorg::blog_theme +
scale_colour_manual(values = blorg::blog_palette)
migration_clean %>%
select(countries_most_net_migrants, year, net_migration) %>%
group_by(countries_most_net_migrants, year) %>%
summarise(total_net_migration = sum(net_migration)) %>%
ggplot(aes(year, total_net_migration,
colour = countries_most_net_migrants,
group = countries_most_net_migrants)) +
geom_path(size = 1.5) +
blorg::blog_theme +
scale_colour_manual(values = blorg::blog_palette)
most_net_migrants <-
migration_country_summary %>% ungroup() %>%
arrange(total_net_migration) %>%
select(country, total_net_migration) %>%
top_n(3)
migration_clean$countries_most_net_migrants <-
if_else(migration_clean$country %in% most_net_migrants$country,
migration_clean$country, "Other")
migration_clean %>%
select(countries_most_net_migrants, year, net_migration) %>%
group_by(countries_most_net_migrants, year) %>%
summarise(total_net_migration = sum(net_migration)) %>%
ggplot(aes(year, total_net_migration,
colour = countries_most_net_migrants,
group = countries_most_net_migrants)) +
geom_path(size = 1.5) +
blorg::blog_theme +
scale_colour_manual(values = blorg::blog_palette)
migration_clean %>%
select(countries_most_net_migrants, year, net_migration) %>%
group_by(countries_most_net_migrants, year) %>%
summarise(total_net_migration = sum(net_migration)) %>%
ggplot(aes(year, total_net_migration,
colour = countries_most_net_migrants,
group = countries_most_net_migrants)) +
geom_bar(position = "fill") +
blorg::blog_theme +
scale_colour_manual(values = blorg::blog_palette)
migration_clean %>%
select(countries_most_net_migrants, year, net_migration) %>%
group_by(countries_most_net_migrants, year) %>%
summarise(total_net_migration = sum(net_migration)) %>%
ggplot(aes(year, total_net_migration,
colour = countries_most_net_migrants,
group = countries_most_net_migrants)) +
geom_bar(position = "fill", stat = "identity") +
blorg::blog_theme +
scale_colour_manual(values = blorg::blog_palette)
migration_clean %>%
select(countries_most_net_migrants, year, net_migration) %>%
group_by(countries_most_net_migrants, year) %>%
summarise(total_net_migration = sum(net_migration)) %>%
ggplot(aes(year, total_net_migration,
colour = countries_most_net_migrants,
group = countries_most_net_migrants)) +
geom_bar(position = "dodge", stat = "identity") +
blorg::blog_theme +
scale_colour_manual(values = blorg::blog_palette)
migration_clean %>%
select(countries_most_net_migrants, year, net_migration) %>%
group_by(countries_most_net_migrants, year) %>%
summarise(total_net_migration = sum(net_migration)) %>%
ggplot(aes(year, total_net_migration,
fill = countries_most_net_migrants,
group = countries_most_net_migrants)) +
geom_bar(position = "dodge", stat = "identity") +
blorg::blog_theme +
scale_fill_manual(values = blorg::blog_palette)
migration_clean %>%
select(countries_most_net_migrants, year, net_migration) %>%
group_by(countries_most_net_migrants, year) %>%
summarise(total_net_migration = sum(net_migration)) %>%
ggplot(aes(year, total_net_migration,
fill = countries_most_net_migrants,
group = countries_most_net_migrants)) +
geom_bar(position = "stack", stat = "identity") +
blorg::blog_theme +
scale_fill_manual(values = blorg::blog_palette)
migration_clean$country %>% unique()
migration_clean %>% ungroup() %>%
select(country, year, immigrants) %>%
ggplot(aes(year, immigrants, colour = country, group = country)) +
geom_line(size = 1.5) +
blorg::blog_theme
migration_year_summary %>% ungroup() %>%
select(year, sum_immigrants, sum_emmigrants) %>%
gather(key = "movement_type", value = "count",
sum_immigrants:sum_emmigrants) %>%
ggplot(aes(year, count, colour = movement_type, group = movement_type)) +
geom_line(size = 1.5) +
blorg::blog_theme +
scale_colour_manual(values = blorg::blog_palette)
migration_clean %>% ungroup() %>%
select(country, year, immigrants) %>%
ggplot(aes(year, immigrants, colour = country, group = country)) +
geom_line(size = 1.5) +
blorg::blog_theme
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
ggplot(aes(year, immigrants, colour = country, group = country)) +
geom_line(size = 1.5) +
blorg::blog_theme
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
ggplot(aes(year, net_migration_per_cap,
colour = country, group = country)) +
geom_line(size = 1.5) +
blorg::blog_theme
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
ggplot(aes(year, net_migration_per_cap,
colour = country, group = country)) +
geom_line(size = 1.5) +
blorg::blog_theme
migration_clean %>%
select(country, year, net_migration_per_cap * 1000) %>%
ggplot(aes(year, net_migration_per_cap,
colour = country, group = country)) +
geom_line(size = 1.5) +
blorg::blog_theme
migration_clean %>%
select(country, year, net_migration_per_cap * 1000)
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
ggplot(aes(year, net_migration_per_cap * 1000,
colour = country, group = country)) +
geom_line(size = 1.5) +
blorg::blog_theme
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
ggplot(aes(year, net_migration_per_cap * 1000,
colour = country, group = country)) +
geom_bar(stat = "identity") +
blorg::blog_theme
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
ggplot(aes(year, net_migration_per_cap * 1000,
fill = country, group = country)) +
geom_bar(stat = "identity") +
blorg::blog_theme
migration_clean$country %>% unique()
migration_clean$country %>% unique() %>% length()
c("Bulgaria", "Belgium", "Liechtenstein", "Romania")
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
ggplot(aes(year, net_migration_per_cap * 1000,
fill = country, group = country)) +
geom_bar(stat = "identity") +
blorg::blog_theme +
facet_grid(~country)
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
ggplot(aes(year, net_migration_per_cap * 1000,
fill = country, group = country)) +
geom_bar(stat = "identity") +
blorg::blog_theme +
facet_wrap(~country, ncol = 4)
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
ggplot(aes(year, net_migration_per_cap * 1000,
fill = country, group = country)) +
geom_bar(stat = "identity") +
blorg::blog_theme +
facet_wrap(~country, ncol = 4) +
theme(legend.position = "none")
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
ggplot(aes(year, net_migration_per_cap * 1000,
fill = country, group = country)) +
geom_bar(stat = "identity") +
blorg::blog_theme +
facet_wrap(~country, ncol = 7) +
theme(legend.position = "none")
migration_clean %>% group_by(country) %>%
filter(year == 2016)
migration_clean %>%
filter(year == 2016) %>%
select(population)
migration_clean %>%
filter(year == 2016) %>%
arrange(population)
migration_clean %>%
filter(year == 2016) %>%
arrange(desc(population))
(migration_clean %>%
filter(year == 2016) %>%
arrange(desc(population)))$country
country_order_by_pop <-
(migration_clean %>%
filter(year == 2016) %>%
arrange(desc(population)))$country
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
mutate(country = factor(country, levels = country_order_by_pop))
ggplot(aes(year, net_migration_per_cap * 1000,
fill = country, group = country)) +
geom_bar(stat = "identity") +
blorg::blog_theme +
facet_wrap(~country, ncol = 7) +
theme(legend.position = "none")
country_order_by_pop <-
(migration_clean %>%
filter(year == 2016) %>%
arrange(desc(population)))$country
country_order_by_pop
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
mutate(country = factor(country, levels = country_order_by_pop)) %>%
ggplot(aes(year, net_migration_per_cap * 1000,
fill = country, group = country)) +
geom_bar(stat = "identity") +
blorg::blog_theme +
facet_wrap(~country, ncol = 7) +
theme(legend.position = "none")
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
mutate(country = factor(country, levels = country_order_by_pop)) %>%
ggplot(aes(year, net_migration_per_cap * 1000,
fill = country, group = country)) +
geom_bar(stat = "identity") +
blorg::blog_theme +
facet_wrap(~country, ncol = 7) +
theme(legend.position = "none") +
labs(title = "European Net Migration per 1000 - Ordered By 2016 Population", x = "Year", y = "Net Migration per 1000 Population")
library(tidyverse)
library(stringr)
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
mutate(country = factor(country, levels = country_order_by_pop)) %>%
ggplot(aes(year, net_migration_per_cap * 1000,
fill = country, group = country)) +
geom_bar(stat = "identity") +
blorg::blog_theme +
facet_wrap(~country, ncol = 7) +
theme(legend.position = "none") +
labs(title = "European Net Migration per 1000 - Ordered By 2016 Population", x = "Year", y = "Net Migration per 1000 Population")
remove.packages("blorg")
devtools::install_github("cormac85/Data_Constitutional/Utilities/blorg")
devtools::install_github("cormac85/Data_Constitutional/Utilities/blorg")
library(tidyverse, stringr)
library(stringr)
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
mutate(country = factor(country, levels = country_order_by_pop)) %>%
ggplot(aes(year, net_migration_per_cap * 1000,
fill = country, group = country)) +
geom_bar(stat = "identity") +
blorg::blog_theme +
facet_wrap(~country, ncol = 7) +
theme(legend.position = "none") +
labs(title = "European Net Migration per 1000 - Ordered By 2016 Population", x = "Year", y = "Net Migration per 1000 Population")
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
mutate(country = factor(country, levels = country_order_by_pop)) %>%
ggplot(aes(year, net_migration_per_cap * 1000,
fill = country, group = country)) +
geom_bar(stat = "identity") +
blorg::blog_theme +
facet_wrap(~country, ncol = 7) +
theme(legend.position = "none") +
labs(title = "European Net Migration per 1000 - Ordered By 2016 Population", x = "Year", y = "Net Migration per 1000 Population") +
scale_x_continuous(breaks = c(2006, 2011, 2016))
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
mutate(country = factor(country, levels = country_order_by_pop)) %>%
ggplot(aes(year, net_migration_per_cap * 1000,
fill = country, group = country)) +
geom_bar(stat = "identity") +
blorg::blog_theme +
facet_wrap(~country, ncol = 7) +
theme(legend.position = "none") +
labs(title = "European Net Migration per 1000 - Ordered By 2016 Population", x = "Year", y = "Net Migration per 1000 Population") +
scale_x_continuous(breaks = scales::pretty_breaks(n = 3))
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
mutate(country = factor(country, levels = country_order_by_pop)) %>%
ggplot(aes(year, net_migration_per_cap * 1000,
fill = country, group = country)) +
geom_bar(stat = "identity") +
blorg::blog_theme +
facet_wrap(~country, ncol = 7) +
theme(legend.position = "none") +
labs(title = "European Net Migration per 1000 - Ordered By 2016 Population", x = "Year", y = "Net Migration per 1000 Population") +
scale_x_discrete(breaks = scales::pretty_breaks(n = 3))
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
mutate(country = factor(country, levels = country_order_by_pop)) %>%
ggplot(aes(year, net_migration_per_cap * 1000,
fill = country, group = country)) +
geom_bar(stat = "identity") +
blorg::blog_theme +
facet_wrap(~country, ncol = 7) +
theme(legend.position = "none") +
labs(title = "European Net Migration per 1000 - Ordered By 2016 Population", x = "Year", y = "Net Migration per 1000 Population") +
scale_x_discrete(breaks = c(2006, 2011, 2016))
migration_clean %>%
select(country, year, net_migration_per_cap) %>%
mutate(country = factor(country, levels = country_order_by_pop)) %>%
ggplot(aes(year, net_migration_per_cap * 1000,
fill = country, group = country)) +
geom_bar(stat = "identity") +
blorg::blog_theme +
facet_wrap(~country, ncol = 7) +
theme(legend.position = "none") +
labs(title = "European Net Migration per 1000 - Ordered By 2016 Population", x = "Year", y = "Net Migration per 1000 Population") +
scale_x_discrete(breaks = scales::pretty_breaks(n = 5))
